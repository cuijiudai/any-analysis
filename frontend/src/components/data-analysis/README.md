# 数据分析筛选功能

## 功能概述

第三步数据分析页面现在包含了一个强大的筛选系统，根据不同的数据类型提供相应的筛选组件。

## 筛选Scheme定义

### 支持的数据类型

1. **文本类型 (string, text)**
   - 组件：输入框或多选下拉框
   - 操作符：等于、不等于、包含、为空、不为空
   - 智能判断：如果唯一值少于50个，自动显示为枚举选择

2. **数字类型 (integer, number, decimal, float)**
   - 组件：数值范围选择器
   - 操作符：等于、不等于、大于、大于等于、小于、小于等于、范围、为空、不为空
   - 支持滑块和输入框两种方式

3. **日期类型 (date, datetime)**
   - 组件：日期范围选择器
   - 操作符：等于、大于、小于、范围、为空、不为空
   - 支持单日期和日期范围选择

4. **布尔类型 (boolean)**
   - 组件：下拉选择框
   - 选项：是/否
   - 操作符：等于、为空、不为空

5. **枚举类型 (enum)**
   - 组件：多选下拉框
   - 自动从对话数据聚合唯一值
   - 显示每个值的出现次数
   - 支持搜索和批量选择

## 组件结构

### EnhancedFilterPanel
- 主筛选面板组件
- 支持展开/收起
- 显示筛选条件摘要
- 按数据类型分组显示字段

### FilterScheme
- 定义各种数据类型的筛选规则
- 提供统一的筛选组件接口
- 支持动态加载枚举值

### FilterComponent
- 单个字段的筛选组件
- 根据字段类型和统计信息渲染相应的输入组件
- 支持实时筛选条件更新

## API接口

### 获取字段枚举值
```
POST /data-analysis/field-values
{
  "sessionId": "string",
  "fieldName": "string", 
  "limit": 50
}
```

### 批量获取字段统计
```
POST /data-analysis/field-stats
{
  "sessionId": "string",
  "fields": ["field1", "field2"]
}
```

## 使用方式

1. 在数据分析页面，筛选面板会自动显示在表格上方
2. 点击"展开"按钮查看所有可筛选字段
3. 根据字段类型选择合适的筛选条件
4. 点击"应用筛选"按钮执行筛选
5. 可以通过标签快速清除单个或全部筛选条件

## 特性

- **智能类型识别**：自动根据数据特征判断最适合的筛选组件
- **枚举值聚合**：从实际数据中提取唯一值作为选项
- **实时统计**：显示字段的统计信息（唯一值数量、范围、空值等）
- **用户友好**：直观的界面设计，支持快速操作
- **性能优化**：支持大数据量的筛选操作